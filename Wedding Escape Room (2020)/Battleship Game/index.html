<!DOCTYPE html>
<html>
<head>
  <link href="./style.css" style="text/css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Pirata+One|Source+Code+Pro&display=swap" rel="stylesheet">
</head>
<body>

  <h1>Welcome to a Rousing Game of Battleship!</h1>
  <p class="Beffy">Congratulations. You have one final puzzle left.
    You'll need <a href = "./BattleshipTable.html" target="_blank">this table</a> for later.
  <p class="Beffy">When Beff was younger, he loved playing Battleship. Now, he plays Battleship with his yachts.
    Considering the tasks that you've subjected yourself to for an undisclosed amount of Nozama money, we'll stick to free, digital ships.
    Excuse me as I get into character.
  </p>

    <p>Slowly but surely, a sea shanty starts. Beffy reaches out to you once more.</p>

  (Dusty's note: Listening to the sea shanty is completely optional.
  There are no clues in the song, but it does help set the mood.)
  <br>
  <iframe width="500" height="300"
    src="https://www.youtube.com/embed/VUgqqhgVGNQ?list=PL334A457011BC5467" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
  </iframe>





  <p class="Pirate">Ahoy, matey! The waters around these parts are treacherous and filled with enemies.
    A little blue bird told me we're looking for a Battleship (4 squares), a Cruiser (3 squares), and a Submarine (3 squares).
    <br>
    <br>
    Each time you frag a frigate the coordinates will appear below. Good luck, and happy hunting!
  </p>
  <div class = "coordinates">
    Enemy ship coordinates: <span class = "secret" id="hashtag"># </span> <span class = "secret" id = "Cell03">A4</span> <span class = "secret" id = "Cell04">A5</span>
    <span class = "secret" id = "Cell05">A6</span> <span class = "secret" id = "Cell06">A7</span> <span class = "secret" id = "Cell36">D7</span>
    <span class = "secret" id = "Cell46">E7</span> <span class = "secret" id = "Cell56">F7</span> <span class = "secret" id = "Cell64">G5</span>
    <span class = "secret" id = "Cell74">H5</span> <span class = "secret" id = "Cell84">I5</span>
  </div>

<table id="myTable">
</table>

<script>

myFunction();

var rexrex = 0;

var gameBoard = [
				[0,0,0,1,1,1,1,0,0,0],
				[0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0],
				[0,0,0,0,0,0,1,0,0,0],
				[0,0,0,0,0,0,1,0,0,0],
				[0,0,0,0,0,0,1,0,0,0],
				[0,0,0,0,1,0,0,0,0,0],
				[0,0,0,0,1,0,0,0,0,0],
				[0,0,0,0,1,0,0,0,0,0],
				[0,0,0,0,0,0,0,0,0,0]
      ];


function myFunction() {
	var table = document.getElementById("myTable");
    for (x = 0; x < 10; x++) {
    	var row = table.insertRow();
        for (y = 0; y < 10; y++) {
    		    var cell = row.insertCell();
            cell.Id = "" + x + y;
    		    cell.innerHTML = "Click to fire";
            cell.align = "middle";
            cell.addEventListener("click", testing, false);
        }
    }
}

function testing() {
	//alert("Success");
    var tora = event.target.Id;
    //alert(tora);
    //alert(gameBoard[tora[0]][tora[1]]);
    if (gameBoard[tora[0]][tora[1]] == 0 ) {
      event.target.innerHTML = "0";
      event.target.style.backgroundColor = "grey";


    }
    else if (gameBoard[tora[0]][tora[1]] == 1) {
      event.target.innerHTML = "X";
      event.target.style.backgroundColor = "red";
      var toratora = "Cell" + tora;
      document.getElementById(toratora).style.display = "inline";
      event.target.removeEventListener("click", testing, false);
      rexrex++;
      if (rexrex == 10) {
        alert("Yar! You've won! Me and my little blue birdy thank you!");
        document.getElementById("hashtag").style.display = "inline";
        var ele = document.getElementsByClassName("secret");
        for (eleInt = 0; eleInt < 11; eleInt++) {
          ele[eleInt].classList.add("Nia");
        }

      }

    }

}

</script>

</body>
</html>
